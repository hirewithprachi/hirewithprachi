const e=async(e,t,i,n,o,r)=>{try{if(n(!0),r(null),o(!1),console.log("Starting PDF generation with states..."),console.log("Calculator type:",e),console.log("Result data:",t),console.log("User data:",i),!(e&&t&&i&&i.email))throw new Error("Missing required parameters for PDF generation");const a=await(async(e,t,i)=>{try{if(console.log("Generating email report for:",e),!(e&&t&&i&&i.email))throw new Error("Missing required parameters: calculatorType, result, userData.email");const n=`\n      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background: #ffffff;">\n        <div style="background: linear-gradient(135deg, #1e40af, #7c3aed); color: white; padding: 30px; border-radius: 12px; margin-bottom: 30px; text-align: center;">\n          <div style="font-size: 28px; font-weight: 700; margin-bottom: 8px;">Hire With Prachi</div>\n          <div style="font-size: 16px; opacity: 0.9; margin-bottom: 15px;">Professional HR Solutions & Consulting</div>\n          <div style="font-size: 14px; opacity: 0.8;">Report Generated: ${(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}</div>\n        </div>\n        \n        <div style="background: #1e40af; color: white; padding: 25px; border-radius: 12px; margin-bottom: 30px; text-align: center;">\n          <h1 style="font-size: 24px; font-weight: 600; margin: 0;">${e.charAt(0).toUpperCase()+e.slice(1)} Calculator Report</h1>\n        </div>\n        \n        <div style="background: #f8fafc; padding: 30px; border-radius: 12px; margin-bottom: 30px;">\n          <h2 style="color: #1e40af; margin-bottom: 20px;">Hello ${i.name||i.fullName||i.email.split("@")[0]}!</h2>\n          \n          <p style="font-size: 16px; line-height: 1.6; margin-bottom: 20px;">\n            Your HR calculator report is ready! Here are your detailed results:\n          </p>\n          \n          <div style="background: #10b981; color: white; padding: 25px; border-radius: 12px; margin-bottom: 25px; text-align: center;">\n            <div style="font-size: 18px; font-weight: 600; margin-bottom: 10px;">Analysis Complete</div>\n            <div style="font-size: 32px; font-weight: 700; margin-bottom: 15px;">Results Ready</div>\n          </div>\n          \n          <div style="background: white; padding: 20px; border-radius: 8px; border-left: 4px solid #1e40af; margin-bottom: 20px;">\n            <h3 style="color: #1e40af; margin-bottom: 15px;">Detailed Results:</h3>\n            <pre style="background: #f8fafc; padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 14px; line-height: 1.4;">${JSON.stringify(t,null,2)}</pre>\n          </div>\n          \n          <div style="background: #fef3c7; padding: 20px; border-radius: 8px; border-left: 4px solid #f59e0b; margin-bottom: 20px;">\n            <h4 style="color: #1f2937; margin-bottom: 10px; font-size: 16px;">Next Steps</h4>\n            <p style="color: #374151; font-size: 14px;">Review your results and consider how these insights can improve your HR strategy. Our team is ready to help you implement these recommendations.</p>\n          </div>\n        </div>\n        \n        <div style="background: #059669; color: white; padding: 30px; border-radius: 12px; margin-bottom: 30px; text-align: center;">\n          <div style="font-size: 20px; font-weight: 600; margin-bottom: 15px;">Ready to Transform Your HR Strategy?</div>\n          <div style="font-size: 16px; margin-bottom: 20px; opacity: 0.9;">Book a FREE consultation with our HR experts</div>\n          <div style="font-size: 14px; line-height: 1.8;">\n            üìß info@hirewithprachi.com<br>\n            üì± +91-8740889927<br>\n            üåê prachi-hr.com\n          </div>\n        </div>\n        \n        <div style="background: #1f2937; color: white; padding: 25px; border-radius: 12px; text-align: center; font-size: 12px;">\n          <div style="font-weight: 600; font-size: 14px; margin-bottom: 10px;">Generated by Hire with Prachi</div>\n          <p style="margin-bottom: 5px;">Professional HR Solutions for Startups & SMEs</p>\n          <p style="margin-bottom: 5px;">Generated on ${(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}</p>\n        </div>\n      </div>\n    `,o=await fetch("https://api.resend.com/emails",{method:"POST",headers:{Authorization:"Bearer re_jdaQP9kQ_JoPJLrmtwr14fLXB2X6EsNj6","Content-Type":"application/json"},body:JSON.stringify({from:"Prachi Shrivastava <info@hirewithprachi.com>",to:i.email,subject:`Your ${e.charAt(0).toUpperCase()+e.slice(1)} Calculator Report is Ready!`,html:n})});if(!o.ok){const e=await o.text();throw new Error(`Email sending failed: ${o.status} - ${e}`)}const r=await o.json();return console.log("Email sent successfully:",r),{success:!0,message:"Report generated and email sent successfully",emailId:r.id}}catch(n){throw console.error("Error in generatePdfReport:",n),n}})(e,t,i);return console.log("PDF generation successful:",a),o(!0),n(!1),setTimeout(()=>o(!1),5e3),a}catch(a){console.error("PDF generation with states failed:",a),console.error("Error details:",{calculatorType:e,result:t?"Present":"Missing",userData:i?"Present":"Missing",userEmail:i?.email||"Missing"});let s="PDF generation failed. Please try again.";throw a.message.includes("Missing required parameters")?s="Invalid data provided. Please try again.":a.message.includes("not deployed")||a.message.includes("being set up")?s="PDF service is being set up. Your report will be sent to your email once ready.":a.message.includes("network")||a.message.includes("fetch")?s="Network error. Please check your connection and try again.":a.message.includes("email")?s="Please provide a valid email address.":a.message.includes("429")&&(s="Service temporarily busy. Please try again in a moment."),r(s),n(!1),o(!1),a}};export{e as g};
