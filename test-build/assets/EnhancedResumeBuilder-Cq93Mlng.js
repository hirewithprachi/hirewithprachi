import{j as e,m as t,A as s}from"./ui-CcYA9Yr6.js";import{r as a,R as i}from"./router-B6UZmQX4.js";import{u as r,a as n,E as o,o as l,b as c,s as d}from"./enhancedResumeService-DQrSqNCj.js";import{aV as m,au as u,O as p,C as g,aN as h,K as x,am as f,N as b,m as y,E as v,X as w,Z as _,a2 as j,D as N,r as k,a1 as E,Q as S}from"./index-CYK67J1M.js";import{L as C}from"./lock-D-rkxLk_.js";import{W as R,P as T}from"./wand-2-CuBfxVCA.js";import"./vendor-PgpX3k0v.js";const A=m("https://ktqrzokrqizfjqdgwmqs.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt0cXJ6b2tycWl6ZmpxZGd3bXFzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQyMzIzOTIsImV4cCI6MjA2OTgwODM5Mn0.2g3y9b7bsX444RlJ5_syCtHb-WEhHmZf2WxucPrRiPQ"),I={resume_builder_flow:{name:"Resume Builder Step Flow",description:"Test different step sequences and UI layouts",status:"active",variants:{control:{name:"Original 7-Step Flow",weight:50,config:{stepCount:7,aiButtonPosition:"inline",progressStyle:"linear",saveFrequency:5e3}},simplified:{name:"Simplified 5-Step Flow",weight:50,config:{stepCount:5,aiButtonPosition:"floating",progressStyle:"circular",saveFrequency:3e3}}},targetMetrics:["completion_rate","time_to_complete","user_satisfaction"]},ai_feature_prominence:{name:"AI Feature Visibility",description:"Test different ways to present AI enhancement features",status:"active",variants:{control:{name:"Subtle AI Buttons",weight:40,config:{aiButtonStyle:"subtle",aiTooltips:!1,aiCallouts:!1,aiDemoModal:!1}},prominent:{name:"Prominent AI Features",weight:40,config:{aiButtonStyle:"prominent",aiTooltips:!0,aiCallouts:!0,aiDemoModal:!1}},demo_first:{name:"AI Demo on Entry",weight:20,config:{aiButtonStyle:"prominent",aiTooltips:!0,aiCallouts:!0,aiDemoModal:!0}}},targetMetrics:["ai_feature_usage","upgrade_rate","user_engagement"]},pricing_presentation:{name:"Pricing Strategy Test",description:"Test different pricing presentations and upgrade prompts",status:"active",variants:{control:{name:"Standard Pricing",weight:50,config:{showPricingUpfront:!1,quotaWarningTiming:"at_limit",upgradeModalStyle:"minimal",freeTrialOffer:!1}},value_focused:{name:"Value-Focused Pricing",weight:50,config:{showPricingUpfront:!0,quotaWarningTiming:"early",upgradeModalStyle:"detailed",freeTrialOffer:!0}}},targetMetrics:["conversion_rate","upgrade_rate","trial_signup_rate"]},template_showcase:{name:"Template Selection Experience",description:"Test different ways to present resume templates",status:"active",variants:{control:{name:"Grid View",weight:50,config:{templateLayout:"grid",previewSize:"medium",filterOptions:["category"],premiumBadges:"corner"}},carousel:{name:"Interactive Carousel",weight:50,config:{templateLayout:"carousel",previewSize:"large",filterOptions:["category","industry","experience"],premiumBadges:"overlay"}}},targetMetrics:["template_selection_rate","premium_template_interest","user_engagement"]}};class q{static async getUserVariant(e,t=null){try{const s=t||this.getAnonymousUserId(),a=I[e];if(!a||"active"!==a.status)return this.getDefaultVariant(e);const i=await this.getExistingAssignment(e,s);if(i)return i;const r=this.assignVariant(a,s);return await this.saveAssignment(e,s,r,null!==t),await this.trackEvent("variant_assigned",{test_name:e,variant_name:r.name,user_id:s,is_authenticated:null!==t}),r}catch(s){return console.error("Error getting user variant:",s),this.getDefaultVariant(e)}}static async getExistingAssignment(e,t){try{const{data:s}=await A.from("ab_test_assignments").select("variant_name, variant_config").eq("test_name",e).eq("user_id",t).single();return s?{name:s.variant_name,config:s.variant_config}:null}catch(s){return null}}static assignVariant(e,t){const s=this.hashUserId(t),a=Object.entries(e.variants);let i=0;const r=a.map(([e,t])=>(i+=t.weight,{key:e,variant:t,cumulativeWeight:i})),n=s%100/100*i;for(const{key:c,variant:d,cumulativeWeight:m}of r)if(n<=m)return{key:c,name:d.name,config:d.config};const[o,l]=a[0];return{key:o,name:l.name,config:l.config}}static async saveAssignment(e,t,s,a){try{await A.from("ab_test_assignments").insert({test_name:e,user_id:t,variant_name:s.name,variant_config:s.config,is_authenticated:a,assigned_at:(new Date).toISOString()})}catch(i){console.error("Error saving assignment:",i)}}static getDefaultVariant(e){const t=I[e];if(!t)return{name:"default",config:{}};const s=t.variants.control||Object.values(t.variants)[0];return{name:s.name,config:s.config}}static async trackConversion(e,t,s=null,a={}){try{const i=s||this.getAnonymousUserId(),r=await this.getExistingAssignment(e,i);if(!r)return;await this.trackEvent("conversion",{test_name:e,variant_name:r.name,conversion_type:t,user_id:i,is_authenticated:null!==s,...a}),await A.from("ab_test_assignments").update({converted:!0,conversion_type:t,converted_at:(new Date).toISOString(),conversion_metadata:a}).eq("test_name",e).eq("user_id",i)}catch(i){console.error("Error tracking conversion:",i)}}static async trackMetric(e,t,s,a=null,i={}){try{const r=a||this.getAnonymousUserId(),n=await this.getExistingAssignment(e,r);if(!n)return;await this.trackEvent("metric_tracked",{test_name:e,variant_name:n.name,metric_name:t,metric_value:s,user_id:r,is_authenticated:null!==a,...i})}catch(r){console.error("Error tracking metric:",r)}}static async trackEvent(e,t){try{await A.from("ab_test_events").insert({event_type:e,data:t,created_at:(new Date).toISOString()})}catch(s){console.error("Error tracking event:",s)}}static async getTestResults(e,t=null,s=null){try{let a=A.from("ab_test_assignments").select("\n          variant_name,\n          converted,\n          conversion_type,\n          is_authenticated,\n          assigned_at,\n          converted_at\n        ").eq("test_name",e);t&&(a=a.gte("assigned_at",t)),s&&(a=a.lte("assigned_at",s));const{data:i}=await a,r={};return i.forEach(e=>{const t=e.variant_name;if(r[t]||(r[t]={name:t,totalUsers:0,conversions:0,conversionRate:0,avgTimeToConvert:0,totalTimeToConvert:0,authenticatedUsers:0,anonymousUsers:0}),r[t].totalUsers++,e.is_authenticated?r[t].authenticatedUsers++:r[t].anonymousUsers++,e.converted&&(r[t].conversions++,e.converted_at&&e.assigned_at)){const s=new Date(e.converted_at)-new Date(e.assigned_at);r[t].totalTimeToConvert+=s}}),Object.values(r).forEach(e=>{e.conversionRate=e.totalUsers>0?e.conversions/e.totalUsers*100:0,e.avgTimeToConvert=e.conversions>0?e.totalTimeToConvert/e.conversions:0,delete e.totalTimeToConvert}),{testName:e,period:{startDate:t,endDate:s},results:Object.values(r),summary:this.calculateTestSummary(Object.values(r))}}catch(a){return console.error("Error getting test results:",a),null}}static calculateTestSummary(e){const t=e.reduce((e,t)=>e+t.totalUsers,0),s=e.reduce((e,t)=>e+t.conversions,0),a=t>0?s/t*100:0,i=e.reduce((e,t)=>t.conversionRate>e.conversionRate?t:e,e[0]),r=this.calculateSignificance(e);return{totalUsers:t,totalConversions:s,overallConversionRate:Math.round(100*a)/100,bestPerformingVariant:i?.name,bestConversionRate:Math.round(100*i?.conversionRate)/100,statisticalSignificance:r,recommendation:this.generateRecommendation(e,r)}}static calculateSignificance(e){if(e.length<2)return"insufficient_data";const[t,s]=e.sort((e,t)=>t.conversionRate-e.conversionRate);if(t.totalUsers<100||s.totalUsers<100)return"insufficient_sample_size";const a=Math.abs(t.conversionRate-s.conversionRate);return a>5?"high":a>2?"medium":a>.5?"low":"not_significant"}static generateRecommendation(e,t){if("insufficient_data"===t||"insufficient_sample_size"===t)return"Continue test to gather more data";if("not_significant"===t)return"No significant difference found. Consider ending test.";const s=e.reduce((e,t)=>t.conversionRate>e.conversionRate?t:e);return`Implement ${s.name} - shows ${Math.round(100*s.conversionRate)/100}% conversion rate with ${t} significance.`}static getAnonymousUserId(){let e=localStorage.getItem("ab_test_user_id");return e||(e="anon_"+this.generateRandomId(),localStorage.setItem("ab_test_user_id",e)),e}static generateRandomId(){return Math.random().toString(36).substr(2,9)+Date.now().toString(36)}static hashUserId(e){let t=0;for(let s=0;s<e.length;s++){t=(t<<5)-t+e.charCodeAt(s),t&=t}return Math.abs(t)}static async initializeForUser(e=null){try{const t={};for(const s of Object.keys(I))t[s]=await this.getUserVariant(s,e);return t}catch(t){return console.error("Error initializing A/B tests:",t),{}}}static async getResumeBuilderConfig(e=null){const t=await this.getUserVariant("resume_builder_flow",e),s=await this.getUserVariant("ai_feature_prominence",e),a=await this.getUserVariant("pricing_presentation",e),i=await this.getUserVariant("template_showcase",e);return{flow:t.config,ai:s.config,pricing:a.config,templates:i.config,variants:{flow:t.name,ai:s.name,pricing:a.name,templates:i.name}}}static async trackResumeEvent(e,t=null,s={}){const a={step_completed:["resume_builder_flow"],ai_feature_used:["ai_feature_prominence"],upgrade_modal_shown:["pricing_presentation"],template_selected:["template_showcase"],resume_completed:["resume_builder_flow","ai_feature_prominence"],user_upgraded:["pricing_presentation","ai_feature_prominence"]}[e]||[];for(const i of a)"user_upgraded"===e?await this.trackConversion(i,"upgrade",t,s):"resume_completed"===e?await this.trackConversion(i,"completion",t,s):await this.trackMetric(i,e,1,t,s)}}const U=l({name:d().min(2,"Name must be at least 2 characters"),headline:d().min(10,"Headline must be at least 10 characters"),email:d().email("Valid email required"),phone:d().optional(),location:d().min(2,"Location required"),links:c(l({label:d(),url:d().url()})).optional()}),D=l({experiences:c(l({company:d().min(2,"Company name required"),role:d().min(2,"Role title required"),location:d().optional(),start:d().min(3,"Start date required"),end:d().min(3,"End date required"),bullets:c(d().min(12).max(200)).min(2,"At least 2 achievements required"),technologies:c(d()).optional()})).min(1,"At least one work experience required")}),P=l({core:c(d()).min(3,"At least 3 core skills required"),tools:c(d()).optional(),soft:c(d()).optional()}),M=()=>{const[c,d]=a.useState(1),[m,A]=a.useState(null),[I,M]=a.useState(null),[O,V]=a.useState([]),[F,z]=a.useState("modern"),[B,J]=a.useState(null),[Q,X]=a.useState(!1),[W,G]=a.useState(null),[L,Z]=a.useState(!1),[$,H]=a.useState(!1),[K,Y]=a.useState(!1),[ee,te]=a.useState(""),[se,ae]=a.useState(null),[ie,re]=a.useState({}),[ne,oe]=a.useState(null),le=ne?.flow&&5===ne.flow.stepCount?[{id:1,title:"Profile & Summary",icon:N,description:"Personal info and professional summary",required:!0,schema:U},{id:2,title:"Experience",icon:k,description:"Work history and achievements",required:!0,schema:D},{id:3,title:"Skills & Education",icon:S,description:"Skills, education, and projects",required:!1,schema:P},{id:4,title:"Design",icon:T,description:"Choose template and style",required:!1},{id:5,title:"Export",icon:v,description:"Review and download resume",required:!1}]:[{id:1,title:"Personal Info",icon:N,description:"Basic contact and profile information",required:!0,schema:U},{id:2,title:"Summary",icon:w,description:"Professional summary and objective",required:!0},{id:3,title:"Experience",icon:k,description:"Work history and achievements",required:!0,schema:D},{id:4,title:"Education",icon:E,description:"Academic background",required:!1},{id:5,title:"Skills & Projects",icon:S,description:"Technical skills and project portfolio",required:!1,schema:P},{id:6,title:"Template & Style",icon:T,description:"Choose design and formatting",required:!1},{id:7,title:"Review & Export",icon:v,description:"Review and generate final resume",required:!1}],ce=r({resolver:n((()=>{const e=le.find(e=>e.id===c);return e?.schema||l({})})()),mode:"onChange"});a.useEffect(()=>{de()},[]);const de=async()=>{try{re(e=>({...e,init:!0}));const e=await o.getCurrentUser();if(e.success){A(e.user);const t=await o.getUserQuotas(e.user.id);t.success&&J(t);const s=await q.getResumeBuilderConfig(e.user.id);oe(s),await q.trackResumeEvent("page_visit",e.user.id,{entry_point:"enhanced_resume_builder",user_plan:e.user.subscription?.plan||"free"})}else{const e=await q.getResumeBuilderConfig();oe(e),await q.trackResumeEvent("page_visit",null,{entry_point:"enhanced_resume_builder",user_type:"anonymous"})}const t=await o.getTemplates();t.success&&V(t.templates);const s=new URLSearchParams(window.location.search).get("resumeId");s?(M(s),await ue(s)):await me()}catch(e){console.error("Error initializing builder:",e)}finally{re(e=>({...e,init:!1}))}},me=async()=>{if(!m)return;const e=await o.createResume(m.id);e.success?M(e.resume.id):"QUOTA_EXCEEDED"===e.code&&H(!0)},ue=async e=>{if(!m)return;const t=await o.getResume(e,m.id);if(t.success&&t.resume.current_version){const e=t.resume.current_version.data;z(t.resume.template_key),ce.reset(e)}},pe=a.useCallback(async()=>{if(I&&m)try{X(!0);const e=ce.getValues();(await o.createResumeVersion(I,e,"Auto-save")).success&&G(new Date)}catch(e){console.error("Auto-save error:",e)}finally{X(!1)}},[I,m,ce]);a.useEffect(()=>{const e=ce.watch(()=>{const e=setTimeout(pe,5e3);return()=>clearTimeout(e)});return()=>e.unsubscribe()},[ce,pe]);const ge=async e=>{if(m&&I)try{re(t=>({...t,[`export_${e}`]:!0}));const t=ce.getValues(),s=await o.createResumeVersion(I,t,"Pre-export save");if(!s.success)throw new Error("Failed to save resume");const a=await o.exportResume(I,s.version.id,e,F,m.id);if(a.success){window.open(a.url,"_blank");const e=await o.getUserQuotas(m.id);e.success&&J(e)}else"QUOTA_EXCEEDED"===a.code&&H(!0)}catch(t){console.error("Export error:",t)}finally{re(t=>({...t,[`export_${e}`]:!1}))}},he=e=>{const t=le.find(t=>t.id===e);if(!t?.schema)return 100;try{const e=ce.getValues();return t.schema.parse(e),100}catch{return 0}},xe=()=>{const e=le.filter(e=>100===he(e.id)).length;return Math.round(e/le.length*100)},fe=e=>{if(!B||!m)return!1;const t=m.subscription?.plan||"free",s=B.limits,a=B.quotas;switch(e){case"ai_polish":return a.ai_polish_count<s.ai_polish;case"exports":return a.exports_count<s.exports;case"jd_analysis":return a.jd_analysis_count<s.jd_analysis;case"premium_templates":return"free"!==t;default:return!0}};return ie.init?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(u,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Loading Resume Builder"}),e.jsx("p",{className:"text-gray-600",children:"Setting up your workspace..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-40",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"text-gray-600 hover:text-gray-900 transition-colors p-2 rounded-lg hover:bg-gray-100",children:e.jsx(p,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"AI-Powered Resume Builder"}),e.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[e.jsx("p",{className:"text-gray-600",children:"Create ATS-optimized resumes with AI assistance"}),e.jsx("div",{className:"flex items-center gap-2 text-sm",children:Q?e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"w-3 h-3 animate-spin text-blue-600"}),e.jsx("span",{className:"text-blue-600",children:"Saving..."})]}):W?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-3 h-3 text-green-600"}),e.jsxs("span",{className:"text-green-600",children:["Saved ",o.getTimeAgo(W)]})]}):null})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[B&&e.jsxs("div",{className:"hidden md:flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-blue-50 rounded-lg",children:[e.jsx(h,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{className:"text-blue-700",children:["AI Polish: ",B.quotas.ai_polish_count,"/",B.limits.ai_polish]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-green-50 rounded-lg",children:[e.jsx(x,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"text-green-700",children:["Exports: ",B.quotas.exports_count,"/",B.limits.exports]})]})]}),m&&e.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-medium "+("free"===m.subscription?.plan?"bg-gray-100 text-gray-800":"bg-purple-100 text-purple-800"),children:"free"===m.subscription?.plan?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"w-3 h-3 inline mr-1"}),"Free Plan"]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-3 h-3 inline mr-1"}),"Pro Plan"]})}),e.jsxs("button",{onClick:()=>Y(!0),disabled:!fe("jd_analysis"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(y,{className:"w-4 h-4"}),"JD Match",!fe("jd_analysis")&&e.jsx(C,{className:"w-3 h-3"})]}),e.jsxs("button",{onClick:()=>Z(!L),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4"}),L?"Edit Mode":"Preview"]})]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"space-y-6 sticky top-24",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Progress"}),e.jsxs("span",{className:"text-sm font-medium text-blue-600",children:[xe(),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4",children:e.jsx(t.div,{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-500",style:{width:`${xe()}%`}})}),e.jsx("div",{className:"text-sm text-gray-600",children:100===xe()?e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{children:"Resume ready for export!"})]}):e.jsxs("span",{children:[7-Math.floor(xe()/14)," steps remaining"]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Resume Sections"}),e.jsx("div",{className:"space-y-2",children:le.map(s=>{const a=he(s.id),r=c===s.id,n=100===a;return e.jsxs(t.button,{onClick:async()=>{c!==s.id&&await q.trackResumeEvent("step_navigation",m?.id,{from_step:c,to_step:s.id,step_name:s.title,navigation_type:"click"}),d(s.id)},className:"w-full flex items-center gap-3 px-3 py-3 rounded-lg text-left transition-all duration-200 "+(r?"bg-blue-50 text-blue-600 border border-blue-200":n?"bg-green-50 text-green-700 border border-green-200":"text-gray-700 hover:bg-gray-50 border border-transparent"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsxs("div",{className:"relative",children:[i.createElement(s.icon,{className:"w-5 h-5"}),n&&e.jsx(g,{className:"w-4 h-4 text-green-500 absolute -top-1 -right-1"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium truncate",children:s.title}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:s.description})]}),s.required&&e.jsx("span",{className:"text-xs text-red-500 flex-shrink-0",children:"*"})]},s.id)})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Export"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>ge("pdf"),disabled:!fe("exports")||ie.export_pdf,className:"w-full flex items-center gap-2 px-3 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[ie.export_pdf?e.jsx(u,{className:"w-4 h-4 animate-spin"}):e.jsx(x,{className:"w-4 h-4"}),"Export PDF",!fe("exports")&&e.jsx(C,{className:"w-3 h-3 ml-auto"})]}),e.jsxs("button",{onClick:()=>ge("docx"),disabled:!fe("exports")||ie.export_docx,className:"w-full flex items-center gap-2 px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[ie.export_docx?e.jsx(u,{className:"w-4 h-4 animate-spin"}):e.jsx(x,{className:"w-4 h-4"}),"Export DOCX",!fe("exports")&&e.jsx(C,{className:"w-3 h-3 ml-auto"})]})]}),!fe("exports")&&e.jsxs("button",{onClick:()=>H(!0),className:"w-full mt-3 px-3 py-2 text-sm bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:shadow-lg transition-all",children:[e.jsx(f,{className:"w-4 h-4 inline mr-2"}),"Upgrade for More Exports"]})]})]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 min-h-[600px]",children:e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:le[c-1]?.icon?i.createElement(le[c-1].icon,{className:"w-8 h-8 text-blue-600"}):e.jsx(w,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:[le[c-1]?.title||"Step"," Builder"]}),e.jsx("p",{className:"text-gray-600 mb-6",children:le[c-1]?.description||"This step is under development"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-8",children:[e.jsxs("button",{onClick:()=>(async(e,t)=>{if(m)try{re(e=>({...e,[t]:"grammar"}));const s=await o.checkGrammar(e,m.id);s.success?console.log("Grammar suggestions:",s.result):"QUOTA_EXCEEDED"===s.code&&H(!0)}catch(s){console.error("Grammar check error:",s)}finally{re(e=>({...e,[t]:null}))}})("sample text","demo"),disabled:!fe("ai_polish"),className:"flex items-center gap-2 px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors disabled:opacity-50",children:[e.jsx(_,{className:"w-4 h-4"}),"Grammar Check",!fe("ai_polish")&&e.jsx(C,{className:"w-3 h-3"})]}),e.jsxs("button",{onClick:()=>(async(e,t,s={})=>{if(m&&I)try{re(e=>({...e,[t]:"polish"}));const a=await o.polishText(e,m.id,I,t,s);if(a.success){ce.setValue(t,a.improved),await q.trackResumeEvent("ai_feature_used",m.id,{feature_type:"ai_polish",field_path:t,text_length:e.length,improvement_score:a.stats?.qualityScore||0});const s=await o.getUserQuotas(m.id);s.success&&J(s)}else"QUOTA_EXCEEDED"===a.code&&(H(!0),await q.trackResumeEvent("quota_exceeded",m.id,{feature_type:"ai_polish",quota_type:"ai_polish_count"}))}catch(a){console.error("AI polish error:",a)}finally{re(e=>({...e,[t]:null}))}})("sample text","demo"),disabled:!fe("ai_polish"),className:"flex items-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors disabled:opacity-50",children:[e.jsx(R,{className:"w-4 h-4"}),"AI Polish",!fe("ai_polish")&&e.jsx(C,{className:"w-3 h-3"})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 text-left max-w-2xl mx-auto",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"Enhanced Features Coming Soon:"}),e.jsxs("ul",{className:"text-blue-800 space-y-2",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-blue-600"}),"React Hook Form with Zod validation"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-blue-600"}),"AI-powered grammar checking (LanguageTool)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-blue-600"}),"GPT-4o-mini content polishing"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-blue-600"}),"Job Description matching & ATS scoring"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-blue-600"}),"Multiple ATS-friendly templates"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-blue-600"}),"PDF/DOCX export with version control"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-blue-600"}),"Usage quotas & subscription management"]})]})]})]})})})})]})}),e.jsx(s,{children:K&&e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(t.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Job Description Analysis"}),e.jsx("button",{onClick:()=>Y(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(j,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Paste Job Description"}),e.jsx("textarea",{value:ee,onChange:e=>te(e.target.value),rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Paste the complete job description here..."})]}),e.jsx("button",{onClick:async()=>{if(m&&I&&ee.trim())try{re(e=>({...e,jdAnalysis:!0}));const e=ce.getValues(),t=await o.analyzeJobDescription(e,ee,m.id,I);if(t.success){ae(t.analysis);const e=await o.getUserQuotas(m.id);e.success&&J(e)}else"QUOTA_EXCEEDED"===t.code&&H(!0)}catch(e){console.error("JD analysis error:",e)}finally{re(e=>({...e,jdAnalysis:!1}))}},disabled:!ee.trim()||ie.jdAnalysis,className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:ie.jdAnalysis?e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"w-4 h-4 animate-spin"}),"Analyzing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-4 h-4"}),"Analyze Match"]})}),se&&e.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Analysis Results"}),e.jsxs("div",{className:"text-green-800",children:[e.jsxs("p",{children:["Match Score: ",se.score,"%"]}),e.jsxs("p",{children:["Missing Keywords: ",se.missing_keywords?.join(", ")]})]})]})]})})]})})}),e.jsx(s,{children:$&&e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx(t.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(f,{className:"w-8 h-8 text-purple-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Upgrade to Pro"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You've reached your free plan limit. Upgrade to Pro for unlimited access to all features."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:async()=>{await q.trackResumeEvent("upgrade_clicked",m?.id,{source:"quota_modal",plan_target:"pro"}),window.location.href="/pricing"},className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-2 px-4 rounded-lg hover:shadow-lg transition-all",children:"View Pricing Plans"}),e.jsx("button",{onClick:async()=>{await q.trackResumeEvent("upgrade_modal_dismissed",m?.id,{source:"quota_modal",action:"continue_free"}),H(!1)},className:"w-full text-gray-600 py-2 px-4 rounded-lg hover:bg-gray-100 transition-colors",children:"Continue with Free Plan"})]})]})})})})]})};export{M as default};
