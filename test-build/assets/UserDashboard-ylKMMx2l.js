import{j as e,m as s}from"./ui-CcYA9Yr6.js";import{r as t}from"./router-B6UZmQX4.js";import{H as a}from"./hrSaaSService-KmXv_aOQ.js";import{U as l,R as r,X as i,a6 as n,aI as c,aV as d,A as o,K as x,aG as m,E as u}from"./index-CYK67J1M.js";import{P as g}from"./plus-CkXHeGPs.js";import{L as h}from"./log-out-CP7BQnaG.js";import"./vendor-PgpX3k0v.js";const b=d("https://ktqrzokrqizfjqdgwmqs.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt0cXJ6b2tycWl6ZmpxZGd3bXFzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQyMzIzOTIsImV4cCI6MjA2OTgwODM5Mn0.2g3y9b7bsX444RlJ5_syCtHb-WEhHmZf2WxucPrRiPQ"),p=()=>{const[s,d]=t.useState(null),[o,x]=t.useState([]),[m,u]=t.useState([]),[p,v]=t.useState(null),[w,S]=t.useState(null),[C,k]=t.useState(!0),[_,I]=t.useState("overview");t.useEffect(()=>{D()},[]);const D=async()=>{try{k(!0);const e=await a.getCurrentUser();e.success&&d(e.user);const s=await a.getUserDocuments();s.success&&x(s.documents);const t=await a.getUserNotifications();t.success&&u(t.notifications);const l=await a.getUserUsage();l.success&&v(l.usage);const r=await a.getUserSubscription();r.success&&S(r.subscription)}catch(e){console.error("Error loading dashboard data:",e)}finally{k(!1)}};return C?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-xl p-6",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]})}),e.jsxs("div",{className:"bg-white rounded-xl p-6",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]})]})]})})}):s?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),e.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",s.profile?.full_name||s.email]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>window.location.href="/tools",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),"New Document"]}),e.jsxs("button",{onClick:async()=>{try{await b.auth.signOut(),window.location.href="/"}catch(e){console.error("Error signing out:",e)}},className:"text-gray-600 hover:text-gray-900 transition-colors flex items-center gap-2",children:[e.jsx(h,{className:"w-4 h-4"}),"Sign Out"]})]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(l,{className:"w-10 h-10 text-blue-600"})}),e.jsx("h3",{className:"font-semibold text-gray-900",children:s.profile?.full_name||"User"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.email}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("free"===s.profile?.subscription_plan?"bg-gray-100 text-gray-800":"bg-blue-100 text-blue-800"),children:"free"===s.profile?.subscription_plan?"Free Plan":`${s.profile?.subscription_plan} Plan`})})]}),e.jsx("nav",{className:"space-y-2",children:[{id:"overview",label:"Overview",icon:r},{id:"documents",label:"My Documents",icon:i},{id:"notifications",label:"Notifications",icon:n},{id:"settings",label:"Settings",icon:c}].map(s=>e.jsxs("button",{onClick:()=>I(s.id),className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors "+(_===s.id?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"),children:[e.jsx(s.icon,{className:"w-5 h-5"}),s.label]},s.id))})]})}),e.jsxs("div",{className:"lg:col-span-3",children:["overview"===_&&e.jsx(j,{user:s,documents:o,usage:p,subscription:w,notifications:m}),"documents"===_&&e.jsx(y,{documents:o,onDownload:async e=>{try{const s=await a.downloadDocument(e);s.success&&window.open(s.document.output_file_url,"_blank")}catch(s){console.error("Error downloading document:",s)}}}),"notifications"===_&&e.jsx(N,{notifications:m,onMarkRead:async e=>{try{await a.markNotificationAsRead(e),u(s=>s.map(s=>s.id===e?{...s,is_read:!0}:s))}catch(s){console.error("Error marking notification as read:",s)}}}),"settings"===_&&e.jsx(f,{user:s})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Please sign in"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You need to be signed in to access your dashboard."}),e.jsx("button",{onClick:()=>window.location.href="/login",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Sign In"})]})})},j=({user:t,documents:l,usage:c,subscription:d,notifications:m})=>{const u=l.slice(0,5),g=m.filter(e=>!e.is_read);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Documents Created"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c?.total||0})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(i,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"This Month"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[c?.used||0," / ",-1===c?.limit?"∞":c?.limit||0]})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(r,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Notifications"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.length})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(n,{className:"w-6 h-6 text-yellow-600"})})]})})]}),e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Documents"}),e.jsxs("button",{onClick:()=>window.location.href="/tools",className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1",children:["View All",e.jsx(o,{className:"w-4 h-4"})]})]})}),e.jsx("div",{className:"p-6",children:0===u.length?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(i,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No documents created yet"}),e.jsx("button",{onClick:()=>window.location.href="/tools",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Create Your First Document"})]}):e.jsx("div",{className:"space-y-4",children:u.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(i,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.hr_tools?.name," • ",a.getTimeAgo(s.created_at)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("completed"===s.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:s.status}),"completed"===s.status&&e.jsx("button",{onClick:()=>handleDownloadDocument(s.id),className:"text-blue-600 hover:text-blue-700",children:e.jsx(x,{className:"w-4 h-4"})})]})]},s.id))})})]}),d&&e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Subscription Status"}),e.jsxs("p",{className:"text-gray-600",children:[d.subscription_plans?.name," Plan • Expires ",new Date(d.current_period_end).toLocaleDateString()]})]}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Manage Subscription"})]})})]})},y=({documents:s,onDownload:l})=>{const[r,n]=t.useState(""),[c,d]=t.useState("all"),o=s.filter(e=>{const s=e.title.toLowerCase().includes(r.toLowerCase()),t="all"===c||e.status===c;return s&&t});return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search documents...",value:r,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:c,onChange:e=>d(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"failed",children:"Failed"})]})]})}),e.jsx("div",{className:"p-6",children:0===o.length?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(i,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No documents found"})]}):e.jsx("div",{className:"space-y-4",children:o.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(i,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.hr_tools?.name," • ",a.getTimeAgo(s.created_at)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("completed"===s.status?"bg-green-100 text-green-800":"processing"===s.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:s.status}),"completed"===s.status&&e.jsx("button",{onClick:()=>l(s.id),className:"text-blue-600 hover:text-blue-700",title:"Download",children:e.jsx(x,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-gray-600 hover:text-gray-900",title:"View",children:e.jsx(u,{className:"w-4 h-4"})})]})]},s.id))})})]})},N=({notifications:s,onMarkRead:t})=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"})}),e.jsx("div",{className:"p-6",children:0===s.length?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(n,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No notifications"})]}):e.jsx("div",{className:"space-y-4",children:s.map(s=>e.jsx("div",{className:"p-4 rounded-lg border "+(s.is_read?"bg-gray-50 border-gray-200":"bg-blue-50 border-blue-200"),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:a.getTimeAgo(s.created_at)})]}),!s.is_read&&e.jsx("button",{onClick:()=>t(s.id),className:"text-blue-600 hover:text-blue-700 text-sm",children:"Mark as read"})]})},s.id))})})]}),f=({user:s})=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Account Settings"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Profile Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",defaultValue:s.profile?.full_name||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",defaultValue:s.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{type:"tel",defaultValue:s.profile?.phone||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company"}),e.jsx("input",{type:"text",defaultValue:s.profile?.company_name||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsx("div",{className:"pt-6 border-t border-gray-200",children:e.jsx("button",{className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Save Changes"})})]})]});export{p as default};
