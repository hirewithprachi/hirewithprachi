import{a4 as e,s as t}from"./index-CYK67J1M.js";const a=e("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),s=e("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);class r{static async createBlogPost(e){try{e.slug||(e.slug=e.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""));const{data:a}=await t.from("blog_posts").select("id").eq("slug",e.slug).single();a&&(e.slug=`${e.slug}-${Date.now()}`),"published"!==e.status||e.published_at||(e.published_at=(new Date).toISOString());const{data:s,error:r}=await t.from("blog_posts").insert([{title:e.title,slug:e.slug,content:e.content,excerpt:e.excerpt||this.generateExcerpt(e.content),category:e.category,tags:e.tags||[],featured_image_url:e.featured_image_url,status:e.status||"draft",published_at:e.published_at,related_services:e.related_services||[],author_id:e.author_id,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}]).select().single();if(r)throw r;return console.log("Blog post created successfully:",s),{success:!0,data:s}}catch(a){console.error("Error creating blog post:",a);const t=JSON.parse(localStorage.getItem("offline_blog_posts")||"[]"),s={id:`local_${Date.now()}`,...e,slug:e.slug||this.generateSlug(e.title),excerpt:e.excerpt||this.generateExcerpt(e.content),created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),offline:!0};return t.push(s),localStorage.setItem("offline_blog_posts",JSON.stringify(t)),{success:!0,data:s,offline:!0,message:"Post saved locally (database unavailable)"}}}static async updateBlogPost(e,a){try{const{meta_title:s,meta_description:r,meta_keywords:o,allow_comments:n,is_featured:i,custom_fields:l,author_name:c,author_bio:g,seo_keywords:d,schema_markup:u,social_media_image:m,reading_time:p,...f}=a;f.updated_at=(new Date).toISOString(),"published"!==f.status||f.published_at||(f.published_at=(new Date).toISOString());const{data:_,error:b}=await t.from("blog_posts").update(f).eq("id",e).select().single();if(b)throw b;return{success:!0,data:_}}catch(s){console.error("Error updating blog post:",s);const t=JSON.parse(localStorage.getItem("offline_blog_posts")||"[]"),r=t.findIndex(t=>t.id===e);if(-1!==r)return t[r]={...t[r],...a},localStorage.setItem("offline_blog_posts",JSON.stringify(t)),{success:!0,data:t[r],offline:!0,message:"Post updated locally (database unavailable)"};throw s}}static async deleteBlogPost(e){try{const{error:a}=await t.from("blog_posts").delete().eq("id",e);if(a)throw a;return{success:!0}}catch(a){console.error("Error deleting blog post:",a);const t=JSON.parse(localStorage.getItem("offline_blog_posts")||"[]").filter(t=>t.id!==e);return localStorage.setItem("offline_blog_posts",JSON.stringify(t)),{success:!0,offline:!0,message:"Post deleted locally (database unavailable)"}}}static async getAllBlogPosts(e={}){try{let a=t.from("blog_posts").select("*").order("created_at",{ascending:!1});e.status&&(a=a.eq("status",e.status)),e.category&&(a=a.eq("category",e.category)),e.limit&&(a=a.limit(e.limit));const{data:s,error:r}=await a;if(r)throw r;const o=JSON.parse(localStorage.getItem("offline_blog_posts")||"[]"),n=[...s||[],...o];return n.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)),{success:!0,data:n}}catch(a){console.error("Error fetching blog posts:",a);return{success:!0,data:JSON.parse(localStorage.getItem("offline_blog_posts")||"[]"),offline:!0,message:"Showing offline posts only (database unavailable)"}}}static async getBlogPostBySlug(e){try{console.log("ðŸ” BlogService: Getting blog post by slug:",e);const{data:a,error:s}=await t.from("blog_posts").select("*").eq("slug",e).single();if(console.log("ðŸ” BlogService: Supabase response - data:",a,"error:",s),s&&"PGRST116"!==s.code)throw s;if(a)return console.log("ðŸ” BlogService: Found blog post:",a.title),{success:!0,data:a};const r=JSON.parse(localStorage.getItem("offline_blog_posts")||"[]").find(t=>t.slug===e);return r?{success:!0,data:r,offline:!0}:{success:!1,error:"Post not found"}}catch(a){return console.error("Error fetching blog post:",a),{success:!1,error:a.message}}}static async incrementViewCount(e){try{await t.rpc("increment_blog_views",{blog_id:e})}catch(a){console.error("Error incrementing view count:",a)}}static generateSlug(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}static generateExcerpt(e,t=200){const a=e.replace(/<[^>]*>/g,"").trim();if(a.length<=t)return a;const s=a.substring(0,t),r=s.lastIndexOf(" ");return r>0?s.substring(0,r)+"...":s+"..."}static async searchBlogPosts(e,a={}){try{let s=t.from("blog_posts").select("*").or(`title.ilike.%${e}%,content.ilike.%${e}%,excerpt.ilike.%${e}%`).eq("status","published").order("created_at",{ascending:!1});a.category&&(s=s.eq("category",a.category)),a.limit&&(s=s.limit(a.limit));const{data:r,error:o}=await s;if(o)throw o;return{success:!0,data:r||[]}}catch(s){console.error("Error searching blog posts:",s);return{success:!0,data:JSON.parse(localStorage.getItem("offline_blog_posts")||"[]").filter(t=>t.title.toLowerCase().includes(e.toLowerCase())||t.content.toLowerCase().includes(e.toLowerCase())||t.excerpt&&t.excerpt.toLowerCase().includes(e.toLowerCase())),offline:!0}}}static getCategories(){return["HR Strategy","Recruitment","Employee Engagement","Compliance","Performance Management","Payroll","Benefits","Training & Development","Leadership","Culture","Remote Work","Technology"]}static getServices(){return[{id:"virtual-hr-management",name:"Virtual HR Management"},{id:"hr-compliance",name:"HR Compliance"},{id:"payroll-management",name:"Payroll Management"},{id:"recruitment-service",name:"Recruitment Service"},{id:"performance-management",name:"Performance Management"},{id:"employee-engagement",name:"Employee Engagement"},{id:"hr-audit",name:"HR Audit"},{id:"mumbai",name:"HR Services Mumbai"},{id:"delhi",name:"HR Services Delhi"},{id:"bangalore",name:"HR Services Bangalore"},{id:"hyderabad",name:"HR Services Hyderabad"},{id:"chennai",name:"HR Services Chennai"},{id:"pune",name:"HR Services Pune"},{id:"kolkata",name:"HR Services Kolkata"},{id:"ahmedabad",name:"HR Services Ahmedabad"},{id:"jaipur",name:"HR Services Jaipur"},{id:"lucknow",name:"HR Services Lucknow"},{id:"indore",name:"HR Services Indore"},{id:"nagpur",name:"HR Services Nagpur"},{id:"bhubaneswar",name:"HR Services Bhubaneswar"},{id:"coimbatore",name:"HR Services Coimbatore"}]}}export{a as B,s as F,r as a};
